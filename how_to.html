<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Some simple examples &mdash; Climind 1.2 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Climind
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Some simple examples</a></li>
<li><a class="reference internal" href="#example-1-getting-some-data">Example 1 - getting some data</a></li>
<li><a class="reference internal" href="#example-2-plotting-a-time-series">Example 2 - plotting a time series</a></li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Climind</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Some simple examples</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/how_to.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="some-simple-examples">
<span id="howto"></span><h1>Some simple examples<a class="headerlink" href="#some-simple-examples" title="Permalink to this heading"></a></h1>
</div>
<div class="section" id="example-1-getting-some-data">
<h1>Example 1 - getting some data<a class="headerlink" href="#example-1-getting-some-data" title="Permalink to this heading"></a></h1>
<p>First we need to import some packages.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">climind.data_manager.processing</span> <span class="k">as</span> <span class="nn">dm</span>
<span class="kn">from</span> <span class="nn">climind.config.config</span> <span class="kn">import</span> <span class="n">DATA_DIR</span>
<span class="kn">from</span> <span class="nn">climind.definitions</span> <span class="kn">import</span> <span class="n">METADATA_DIR</span>
</pre></div>
</div>
<p>Once the packages are imported we can read in the data archive. The default metadata
are stored in the metadata_files directory in the project.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">archive</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">DataArchive</span><span class="o">.</span><span class="n">from_directory</span><span class="p">(</span><span class="n">METADATA_DIR</span><span class="p">)</span>
</pre></div>
</div>
<p>To save time, we don’t want to download all the data sets in the data archive, so first
we select just timeseries data for the variable tas (Global mean temperature) at monthly resolution.
To do that we use the select method of the data archive.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ts_archive</span> <span class="o">=</span> <span class="n">archive</span><span class="o">.</span><span class="n">select</span><span class="p">({</span><span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="s1">&#39;tas&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;timeseries&#39;</span><span class="p">,</span> <span class="s1">&#39;time_resolution&#39;</span><span class="p">:</span> <span class="s1">&#39;monthly&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>Once we have selected this subset of the archive we can then download the data.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ts_archive</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">DATA_DIR</span> <span class="o">/</span> <span class="s2">&quot;ManagedData&quot;</span> <span class="o">/</span> <span class="s2">&quot;Data&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This downloads the selected timeseries to appropriate subdirectories of the Data directory.</p>
</div>
<div class="section" id="example-2-plotting-a-time-series">
<h1>Example 2 - plotting a time series<a class="headerlink" href="#example-2-plotting-a-time-series" title="Permalink to this heading"></a></h1>
<p>The first thing to do is to import the appropriate packages from the project</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">climind.data_manager.processing</span> <span class="k">as</span> <span class="nn">dm</span>
<span class="kn">import</span> <span class="nn">climind.plotters.plot_types</span> <span class="k">as</span> <span class="nn">pt</span>
<span class="kn">from</span> <span class="nn">climind.config.config</span> <span class="kn">import</span> <span class="n">DATA_DIR</span>
<span class="kn">from</span> <span class="nn">climind.definitions</span> <span class="kn">import</span> <span class="n">METADATA_DIR</span>
</pre></div>
</div>
<p>Once the packages are imported we can read in the data archive. The default metadata
are stored in the metadata_files directory in the project.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">archive</span> <span class="o">=</span> <span class="n">dm</span><span class="o">.</span><span class="n">DataArchive</span><span class="o">.</span><span class="n">from_directory</span><span class="p">(</span><span class="n">METADATA_DIR</span><span class="p">)</span>
</pre></div>
</div>
<p>This archive contains all the colections defined in the METADATA_DIR. We don’t want to
read all of these datasets in so the next step is to select a subset. To do this we pass a
dictionary of the required metadata to the select method of the archive. The following snippet
extracts data sets with variable ‘tas’, type ‘timeseries’ and time_resolution ‘monthly’.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ts_archive</span> <span class="o">=</span> <span class="n">archive</span><span class="o">.</span><span class="n">select</span><span class="p">({</span><span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="s1">&#39;tas&#39;</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;timeseries&#39;</span><span class="p">,</span> <span class="s1">&#39;time_resolution&#39;</span><span class="p">:</span> <span class="s1">&#39;monthly&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>We will now read in the selected data sets</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">all_datasets</span> <span class="o">=</span> <span class="n">ts_archive</span><span class="o">.</span><span class="n">read_datasets</span><span class="p">(</span><span class="n">DATA_DIR</span> <span class="o">/</span> <span class="s2">&quot;ManagedData&quot;</span> <span class="o">/</span> <span class="s2">&quot;Data&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This provides a list of datasets which we can use as the basis of further calculations. In this case,
we will just rebaseline the datasets to the 1981 to 2010 average</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">ds</span> <span class="ow">in</span> <span class="n">all_datasets</span><span class="p">:</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">rebaseline</span><span class="p">(</span><span class="mi">1981</span><span class="p">,</span> <span class="mi">2010</span><span class="p">)</span>
</pre></div>
</div>
<p>We can now the plot the data</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pt</span><span class="o">.</span><span class="n">neat_plot</span><span class="p">(</span><span class="n">Path</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">),</span> <span class="n">all_datasets</span><span class="p">,</span> <span class="s1">&#39;test_plot.png&#39;</span><span class="p">,</span> <span class="s1">&#39;Test plot&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will produce a file called test_plot.png as well as the same image in .svg and .pdf formats.</p>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, John Kennedy.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>